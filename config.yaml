settings:
  data_dir: data
  retention_days: 90
  site_title: "Dify Cloud Status (Unofficial)"
  site_url: "https://kurokobo.github.io/dify-status"

checks:
  - id: web_ui
    name: "Web UI"
    type: http
    description: "Check if cloud.dify.ai returns HTTP 200 (does not verify page rendering)"
    params:
      url: "https://cloud.dify.ai"
      method: GET
      expected_status: 200
      timeout: 30

  - id: api
    name: "API"
    type: http
    description: "Run a minimal chat flow (Start + Answer nodes only) and verify that the hardcoded response 'pong' is returned"
    params:
      url: "https://api.dify.ai/v1/chat-messages"
      method: POST
      api_key_env: "DIFY_API_KEY"
      expected_body: "pong"
      timeout: 60

  - id: sandbox
    name: "Sandbox"
    type: http
    description: "Run a chat flow (Start + Template + Answer nodes) where the Template node generates 'pong from sandbox', and verify it is included in the response"
    note: "Depends on API; if the API is down, this check will also fail"
    params:
      url: "https://api.dify.ai/v1/chat-messages"
      method: POST
      api_key_env: "DIFY_SANDBOX_API_KEY"
      expected_body: "pong from sandbox"
      timeout: 60

  - id: plugin
    name: "Plugin"
    type: http
    description: "Run a chat flow (Start + LLM with Fake Models + Answer nodes) where the LLM node generates 'pong from plugin', and verify it is included in the response"
    note: "Depends on API; if the API is down, this check will also fail"
    params:
      url: "https://api.dify.ai/v1/chat-messages"
      method: POST
      api_key_env: "DIFY_PLUGIN_API_KEY"
      expected_body: "pong from plugin"
      timeout: 60

  - id: knowledge
    name: "Knowledge Indexing (Free Plan)"
    type: knowledge
    description: "Upload a small text document with Economy indexing on the Free (Sandbox) plan and verify the indexing queue processes it successfully"
    note: "Depends on API; if the API is down, this check will also fail. Checked every 30 minutes (instead of 15) to stay within API rate limits. Indexing time reflects the actual indexing duration, not the API call latency"
    params:
      base_url: "https://api.dify.ai/v1"
      dataset_id_env: "DIFY_KNOWLEDGE_DATASET_ID"
      api_key_env: "DIFY_KNOWLEDGE_API_KEY"
      timeout: 30
      interval_minutes: 30

  - id: knowledge_pro
    name: "Knowledge Indexing (Pro Plan)"
    type: knowledge
    description: "Upload a small text document with Economy indexing on the Pro plan and verify the indexing queue processes it successfully"
    note: "Depends on API; if the API is down, this check will also fail. Indexing time reflects the actual indexing duration, not the API call latency"
    params:
      base_url: "https://api.dify.ai/v1"
      dataset_id_env: "DIFY_KNOWLEDGE_PRO_DATASET_ID"
      api_key_env: "DIFY_KNOWLEDGE_PRO_API_KEY"
      timeout: 30
